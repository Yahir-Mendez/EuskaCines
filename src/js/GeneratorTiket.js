import{getHash}from"./hashTiket.js";document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("formularioPago");e&&e.addEventListener("submit",(async e=>{e.preventDefault();const t=document.getElementById("email").value,n=document.getElementById("telephone").value,o=JSON.parse(localStorage.getItem("movie")),a=o?o.nombre:"Pel√≠cula no encontrada",l=t+a,m=await getHash(l),c=`${m.slice(-6)}-${parseInt(m.slice(0,2),16)%90+10}-${parseInt(m.slice(2,4),16)%90+10}`,i={email:t,telephone:n,movieName:a,date:(new Date).toLocaleString(),ticketCode:c};localStorage.setItem("tiket",JSON.stringify(i)),window.location.href="tiket.html"}));const t=JSON.parse(localStorage.getItem("tiket")),n=JSON.parse(localStorage.getItem("SalaHora")),o=JSON.parse(localStorage.getItem("cine"));t&&(document.getElementById("ticket-email").textContent=t.email,document.getElementById("ticket-telephone").textContent=t.telephone,document.getElementById("cineName").textContent=o.cine,document.getElementById("ticket-movieName").textContent=t.movieName,document.getElementById("ticket-date").textContent=t.date,document.getElementById("ticket-code").textContent=t.ticketCode,document.getElementById("ticket-horarioSala").textContent=n.hora+" - Sala "+n.sala)}));