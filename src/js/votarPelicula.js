import{getHash}from"./hashTiket.js";document.addEventListener("DOMContentLoaded",(()=>{const t=localStorage.getItem("movie"),e=t?JSON.parse(t).nombre:null;document.getElementById("movieName").textContent=e;const n=document.getElementById("votarPeliculaForm");let a=0;const o=document.querySelectorAll(".star");o.forEach((t=>{t.addEventListener("mouseover",(()=>{const e=t.getAttribute("data-value");o.forEach((t=>t.textContent="☆"));for(let t=0;t<e;t++)o[t].textContent="★"})),t.addEventListener("mouseout",(()=>{o.forEach((t=>t.textContent="☆"));for(let t=0;t<a;t++)o[t].textContent="★"})),t.addEventListener("click",(()=>{a=t.getAttribute("data-value"),o.forEach((t=>t.textContent="☆"));for(let t=0;t<a;t++)o[t].textContent="★"}))})),n.addEventListener("submit",(async function(t){t.preventDefault();const n=new FormData(t.target),o=n.get("email"),r=n.get("tiket"),i=await GeneratorTiket(o,e);r.startsWith(i)?(alert("Tiket valido"),alert(`Película: ${e}, Calificación: ${a}`),window.location.href="/index.html"):alert("Tiket no Valido")}))}));const GeneratorTiket=async(t,e)=>{let n=t+e,a=await getHash(n);return`${a.slice(-6)}-${parseInt(a.slice(0,2),16)%90+10}-${parseInt(a.slice(2,4),16)%90+10}`};